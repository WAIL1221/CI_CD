{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  name: 'OffersDetailsAdmin',\n  data() {\n    return {\n      offer: null,\n      activities: [],\n      availableActivities: [],\n      loadingActivities: false,\n      activitiesError: null\n    };\n  },\n  created() {\n    this.fetchOfferDetails();\n  },\n  methods: {\n    fetchOfferDetails() {\n      const offerId = this.$route.params.id;\n      axios.get(`http://localhost:8000/api/show/offer/${offerId}`).then(response => {\n        this.offer = response.data;\n        if (!this.offer.activities) {\n          this.offer.activities = [];\n        }\n      }).catch(error => {\n        console.error('Erreur lors de la récupération des détails de l\\'offre:', error);\n      });\n    },\n    fetchOfferActivities() {\n      const offerId = this.$route.params.id;\n      this.loadingActivities = true;\n      this.activitiesError = null;\n      axios.get(`http://localhost:8000/api/show/offer/activities/${offerId}`).then(response => {\n        console.log('Réponse des activités:', response.data);\n        this.activities = response.data;\n      }).catch(error => {\n        console.error('Erreur lors de la récupération des activités de l\\'offre:', error);\n        this.activitiesError = 'Erreur lors de la récupération des activités.';\n      }).finally(() => {\n        this.loadingActivities = false;\n      });\n    },\n    fetchAvailableActivities() {\n      axios.get('http://localhost:8000/api/show/activities').then(response => {\n        console.log('Réponse des activités disponibles:', response.data);\n        this.availableActivities = response.data;\n      }).catch(error => {\n        console.error('Erreur lors de la récupération des activités disponibles:', error);\n      });\n    },\n    addActivityToOffer(activityId) {\n      const offerId = this.$route.params.id;\n      axios.post(`http://localhost:8000/api/add/offer/activity/${offerId}/${activityId}`).then(() => {\n        alert('Activité ajoutée à l\\'offre avec succès');\n        this.fetchOfferActivities(); // Refresh the list of activities for the offer\n      }).catch(error => {\n        console.error('Erreur lors de l\\'ajout de l\\'activité à l\\'offre:', error);\n        alert('Erreur lors de l\\'ajout de l\\'activité à l\\'offre');\n      });\n    },\n    deleteOffer() {\n      const offerId = this.$route.params.id;\n      axios.delete(`http://localhost:8000/api/delete/offer/${offerId}`).then(() => {\n        alert('Offre supprimée avec succès');\n        this.$router.push('/offers'); // Redirige vers la liste des offres après la suppression\n      }).catch(error => {\n        console.error('Erreur lors de la suppression de l\\'offre:', error);\n        alert('Erreur lors de la suppression de l\\'offre');\n      });\n    },\n    formatDate(date) {\n      const options = {\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric'\n      };\n      return new Date(date).toLocaleDateString('fr-FR', options);\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","offer","activities","availableActivities","loadingActivities","activitiesError","created","fetchOfferDetails","methods","offerId","$route","params","id","get","then","response","catch","error","console","fetchOfferActivities","log","finally","fetchAvailableActivities","addActivityToOffer","activityId","post","alert","deleteOffer","delete","$router","push","formatDate","date","options","year","month","day","Date","toLocaleDateString"],"sources":["C:\\Application_ginf1\\Frontend\\src\\components\\ADMIN\\OfferDetailsAdmin.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2 class=\"text-center\">Détails de l'offre</h2>\r\n    <div v-if=\"offer\" class=\"offer-details\">\r\n      <div class=\"offer-info card\">\r\n        <h3 class=\"card-title\">{{ offer.titre }}</h3>\r\n        <p><strong>Date début:</strong> {{ formatDate(offer.date_debut) }}</p>\r\n        <p><strong>Date fin:</strong> {{ formatDate(offer.date_fin) }}</p>\r\n        <p><strong>Remise:</strong> {{ offer.remise }}%</p>\r\n        <p><strong>Description:</strong> {{ offer.description }}</p>\r\n      </div>\r\n      <div class=\"offer-image card\" v-if=\"offer.image\">\r\n        <img :src=\"`http://localhost:8000/${offer.image}`\" alt=\"Image de l'offre\">\r\n      </div>\r\n    </div>\r\n    <div v-else class=\"loading\">\r\n      <p>Chargement des détails de l'offre...</p>\r\n    </div>\r\n\r\n    <div class=\"activities-section\">\r\n      <button @click=\"fetchOfferActivities\" class=\"btn-activities\">Afficher les activités</button>\r\n      <div v-if=\"loadingActivities\" class=\"loading\">\r\n        <p>Chargement des activités...</p>\r\n      </div>\r\n      <div v-if=\"activitiesError\" class=\"error\">\r\n        <p>{{ activitiesError }}</p>\r\n      </div>\r\n      <div v-if=\"activities.length\" class=\"activities\">\r\n        <h3>Activités associées</h3>\r\n        <div v-for=\"activity in activities\" :key=\"activity.id\" class=\"activity-card card\">\r\n          <p><strong>Tarif :</strong> {{ activity.tarif }}</p>\r\n          <p><strong>Âge minimum :</strong> {{ activity.age_min }}</p>\r\n          <p><strong>Âge maximum :</strong> {{ activity.age_max }}</p>\r\n          <p><strong>Nombre de séances :</strong> {{ activity.nbr_seance }}</p>\r\n          <p><strong>Volume horaire :</strong> {{ activity.volume_horaire }}</p>\r\n          <p><strong>Option de paiement :</strong> {{ activity.option_paiement }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <button @click=\"fetchAvailableActivities\" class=\"btn-add-activity\">Ajouter une activité</button>\r\n    <div v-if=\"availableActivities.length\" class=\"available-activities\">\r\n      <h3>Activités disponibles</h3>\r\n      <div v-for=\"activity in availableActivities\" :key=\"activity.id\" class=\"activity-card card\">\r\n        <p><strong>Tarif :</strong> {{ activity.tarif }}</p>\r\n        <p><strong>Description :</strong> {{ activity.description}}</p>\r\n        <p><strong>Âge minimum :</strong> {{ activity.age_min }}</p>\r\n        <p><strong>Âge maximum :</strong> {{ activity.age_max }}</p>\r\n        <p><strong>Nombre de séances :</strong> {{ activity.nbr_seance }}</p>\r\n        <p><strong>Volume horaire :</strong> {{ activity.volume_horaire }}</p>\r\n        <p><strong>Option de paiement :</strong> {{ activity.option_paiement }}</p>\r\n        <button @click=\"addActivityToOffer(activity.id)\" class=\"btn-add-to-offer\">Ajouter à l'offre</button>\r\n      </div>\r\n    </div>\r\n\r\n    <button @click=\"deleteOffer\" class=\"btn-delete\">Supprimer l'offre</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'OffersDetailsAdmin',\r\n  data() {\r\n    return {\r\n      offer: null,\r\n      activities: [],\r\n      availableActivities: [],\r\n      loadingActivities: false,\r\n      activitiesError: null\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchOfferDetails();\r\n  },\r\n  methods: {\r\n    fetchOfferDetails() {\r\n      const offerId = this.$route.params.id;\r\n      axios.get(`http://localhost:8000/api/show/offer/${offerId}`)\r\n        .then(response => {\r\n          this.offer = response.data;\r\n          if (!this.offer.activities) {\r\n            this.offer.activities = [];\r\n          }\r\n        })\r\n        .catch(error => {\r\n          console.error('Erreur lors de la récupération des détails de l\\'offre:', error);\r\n        });\r\n    },\r\n    fetchOfferActivities() {\r\n      const offerId = this.$route.params.id;\r\n      this.loadingActivities = true;\r\n      this.activitiesError = null;\r\n      axios.get(`http://localhost:8000/api/show/offer/activities/${offerId}`)\r\n        .then(response => {\r\n          console.log('Réponse des activités:', response.data);\r\n          this.activities = response.data;\r\n        })\r\n        .catch(error => {\r\n          console.error('Erreur lors de la récupération des activités de l\\'offre:', error);\r\n          this.activitiesError = 'Erreur lors de la récupération des activités.';\r\n        })\r\n        .finally(() => {\r\n          this.loadingActivities = false;\r\n        });\r\n    },\r\n    fetchAvailableActivities() {\r\n      axios.get('http://localhost:8000/api/show/activities')\r\n        .then(response => {\r\n          console.log('Réponse des activités disponibles:', response.data);\r\n          this.availableActivities = response.data;\r\n        })\r\n        .catch(error => {\r\n          console.error('Erreur lors de la récupération des activités disponibles:', error);\r\n        });\r\n    },\r\n    addActivityToOffer(activityId) {\r\n      const offerId = this.$route.params.id;\r\n      axios.post(`http://localhost:8000/api/add/offer/activity/${offerId}/${activityId}`)\r\n        .then(() => {\r\n          alert('Activité ajoutée à l\\'offre avec succès');\r\n          this.fetchOfferActivities(); // Refresh the list of activities for the offer\r\n        })\r\n        .catch(error => {\r\n          console.error('Erreur lors de l\\'ajout de l\\'activité à l\\'offre:', error);\r\n          alert('Erreur lors de l\\'ajout de l\\'activité à l\\'offre');\r\n        });\r\n    },\r\n    deleteOffer() {\r\n      const offerId = this.$route.params.id;\r\n      axios.delete(`http://localhost:8000/api/delete/offer/${offerId}`)\r\n        .then(() => {\r\n          alert('Offre supprimée avec succès');\r\n          this.$router.push('/offers'); // Redirige vers la liste des offres après la suppression\r\n        })\r\n        .catch(error => {\r\n          console.error('Erreur lors de la suppression de l\\'offre:', error);\r\n          alert('Erreur lors de la suppression de l\\'offre');\r\n        });\r\n    },\r\n    formatDate(date) {\r\n      const options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n      return new Date(date).toLocaleDateString('fr-FR', options);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 900px;\r\n  margin: 20px auto;\r\n  padding: 20px;\r\n  background: #f7f7f7;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.text-center {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  color: #333;\r\n  font-size: 2rem;\r\n  text-transform: uppercase;\r\n  font-family: 'Montserrat', sans-serif;\r\n}\r\n\r\n.offer-details {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card {\r\n  background: #fff;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n  flex: 1;\r\n}\r\n\r\n.card-title {\r\n  font-size: 1.5rem;\r\n  color: #333;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.offer-info p, .activity-card p {\r\n  font-size: 1rem;\r\n  color: #555;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.offer-image img {\r\n  max-width: 100%;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.activities-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.btn-activities, .btn-add-activity, .btn-delete, .btn-add-to-offer {\r\n  display: block;\r\n  margin: 10px auto;\r\n  padding: 10px 20px;\r\n  background: #007bff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  text-transform: uppercase;\r\n}\r\n\r\n.btn-add-activity {\r\n  background: #28a745;\r\n}\r\n\r\n.btn-delete {\r\n  background: #ff0000;\r\n}\r\n\r\n.btn-add-to-offer {\r\n  background: #17a2b8;\r\n  margin-top: 10px;\r\n}\r\n\r\n.btn-activities:hover, .btn-add-activity:hover, .btn-delete:hover, .btn-add-to-offer:hover {\r\n  opacity: 0.9;\r\n}\r\n\r\n.activities {\r\n  margin-top: 20px;\r\n}\r\n\r\n.activities h3 {\r\n  color: #333;\r\n  font-size: 1.5rem;\r\n  margin-bottom: 10px;\r\n  text-align: center;\r\n}\r\n\r\n.activity-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.loading, .no-activities, .error {\r\n  text-align: center;\r\n  color: #999;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.error {\r\n  color:red;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}