{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6e7ce31b\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"change-password\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"form-header\"\n}, \"Changer le Mot de Passe\", -1 /* HOISTED */));\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"newPassword\",\n  class: \"form-label\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-lock-open\"\n}), /*#__PURE__*/_createTextVNode(\" Nouveau Mot de Passe:\")], -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"confirmPassword\",\n  class: \"form-label\"\n}, [/*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fas fa-lock\"\n}), /*#__PURE__*/_createTextVNode(\" Confirmer Nouveau Mot de Passe:\")], -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"form-submit\"\n}, \"Changer Mot de Passe\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\" Appeler submitForm lors de la soumission \"), _createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"newPassword\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.passwords.password = $event),\n    class: \"form-input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.passwords.password]])]), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"confirmPassword\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.passwords.password_confirmation = $event),\n    class: \"form-input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.passwords.password_confirmation]])]), _hoisted_7], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","_createTextVNode","type","_createElementBlock","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","submitForm","_createCommentVNode","_hoisted_3","_hoisted_4","id","$event","$data","passwords","password","_hoisted_5","_hoisted_6","password_confirmation","_hoisted_7"],"sources":["C:\\app_ginf1\\Frontend\\src\\components\\ChangePassword.vue"],"sourcesContent":["<template>\r\n  <div class=\"change-password\">\r\n    <h2 class=\"form-header\">Changer le Mot de Passe</h2>\r\n    <form @submit.prevent=\"submitForm\"> <!-- Appeler submitForm lors de la soumission -->\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"newPassword\" class=\"form-label\"><i class=\"fas fa-lock-open\"></i> Nouveau Mot de Passe:</label>\r\n        <input type=\"password\" id=\"newPassword\" v-model=\"passwords.password\" class=\"form-input\">\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"confirmPassword\" class=\"form-label\"><i class=\"fas fa-lock\"></i> Confirmer Nouveau Mot de Passe:</label>\r\n        <input type=\"password\" id=\"confirmPassword\" v-model=\"passwords.password_confirmation\" class=\"form-input\">\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"form-submit\">Changer Mot de Passe</button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from '@/axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      passwords: {\r\n        password: '',\r\n        password_confirmation: ''\r\n      },\r\n      token: null, // Stocker le token ici\r\n    };\r\n  },\r\n  mounted() {\r\n    // Récupérer le token de l'URL\r\n    const url = window.location.href;\r\n    const token = url.substring(url.lastIndexOf('/') + 1);\r\n    this.token = token;\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      // Appeler changePassword avec le token\r\n      this.changePassword(this.token);\r\n    },\r\n    changePassword(token) {\r\n      if (!token) {\r\n        alert(\"Token not found in URL.\");\r\n        return;\r\n      }\r\n\r\n      if (this.passwords.password !== this.passwords.password_confirmation) {\r\n        alert(\"Les mots de passe ne correspondent pas.\");\r\n        return;\r\n      }\r\n\r\n      // Envoyer la requête POST avec le token et les nouveaux mots de passe\r\n      axios.post(`${process.env.VUE_APP_API_URL}/api/reset-password/${token}`, this.passwords)\r\n        .then(response => {\r\n          alert(response.data.message);\r\n          this.$router.push('/login');\r\n        })\r\n        .catch(error => {\r\n          console.error('Erreur de Reset Password:', error);\r\n          alert(error.response.data.message);\r\n        });\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Vos styles ici */\r\n</style>\r\n\r\n<style scoped>\r\n/* Vos styles ici */\r\n</style>\r\n\r\n\r\n<style scoped>\r\n.change-password {\r\n  max-width: 500px;\r\n  margin: auto;\r\n  padding: 20px;\r\n  background: #f0f8ff; /* couleur de fond douce */\r\n  border: 2px solid #0096c7; /* bordure bleue */\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-header {\r\n  color: #005f73;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n  font-size: 24px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 20px;\r\n  position: relative;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  color: #003049;\r\n  font-weight: bold;\r\n}\r\n\r\n.form-input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  border: 2px solid #00b4d8;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\n.form-input:focus {\r\n  border-color: #0077b6;\r\n}\r\n\r\n.form-submit {\r\n  width: 100%;\r\n  padding: 10px;\r\n  background-color: #0077b6;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.form-submit:hover {\r\n  background-color: #023e8a;\r\n}\r\n\r\n.fas {\r\n  margin-right: 5px;\r\n}\r\n</style>"],"mappings":";;;EACOA,KAAK,EAAC;AAAiB;gEAC1BC,mBAAA,CAAoD;EAAhDD,KAAK,EAAC;AAAa,GAAC,yBAAuB;;EAGxCA,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAA0G;EAAnGC,GAAG,EAAC,aAAa;EAACF,KAAK,EAAC;iBAAaC,mBAAA,CAAgC;EAA7BD,KAAK,EAAC;AAAkB,I,aAN/EG,gBAAA,CAMoF,wBAAsB,E;;EAI/FH,KAAK,EAAC;AAAY;gEACrBC,mBAAA,CAAmH;EAA5GC,GAAG,EAAC,iBAAiB;EAACF,KAAK,EAAC;iBAAaC,mBAAA,CAA2B;EAAxBD,KAAK,EAAC;AAAa,I,aAX9EG,gBAAA,CAWmF,kCAAgC,E;gEAI7GF,mBAAA,CAAuE;EAA/DG,IAAI,EAAC,QAAQ;EAACJ,KAAK,EAAC;GAAc,sBAAoB;;uBAdlEK,mBAAA,CAgBM,OAhBNC,UAgBM,GAfJC,UAAoD,EACpDN,mBAAA,CAaO;IAbAO,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAHjBC,cAAA,KAAAC,IAAA,KAG2BC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;MAAGG,mBAAA,8CAAiD,EAEnFb,mBAAA,CAGM,OAHNc,UAGM,GAFJC,UAA0G,E,gBAC1Gf,mBAAA,CAAwF;IAAjFG,IAAI,EAAC,UAAU;IAACa,EAAE,EAAC,aAAa;IAP/C,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAOyDC,KAAA,CAAAC,SAAS,CAACC,QAAQ,GAAAH,MAAA;IAAElB,KAAK,EAAC;iDAA1BmB,KAAA,CAAAC,SAAS,CAACC,QAAQ,E,KAGrEpB,mBAAA,CAGM,OAHNqB,UAGM,GAFJC,UAAmH,E,gBACnHtB,mBAAA,CAAyG;IAAlGG,IAAI,EAAC,UAAU;IAACa,EAAE,EAAC,iBAAiB;IAZnD,uBAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAY6DC,KAAA,CAAAC,SAAS,CAACI,qBAAqB,GAAAN,MAAA;IAAElB,KAAK,EAAC;iDAAvCmB,KAAA,CAAAC,SAAS,CAACI,qBAAqB,E,KAGtFC,UAAuE,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}